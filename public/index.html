<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trading Journal Forex</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Login Screen -->
    <div id="login-screen" class="login-container">
        <div class="login-box">
            <h1>Trading Journal Login</h1>
            <form id="login-form">
                <div class="form-group">
                    <label for="username">Username:</label>
                    <input type="text" id="username" placeholder="Enter username" required>
                </div>
                <div class="form-group">
                    <label for="password">Password:</label>
                    <input type="password" id="password" placeholder="Enter password" required>
                </div>
                <button type="submit">Login</button>
                <p id="login-error" class="error-message"></p>
            </form>
        </div>
    </div>

    <!-- Main App -->
    <div id="app-content" style="display:none;">
        <div class="container">
            <header>
                <h1>Trading Journal Forex</h1>
                <div>
                    <button id="export-btn">Export to Excel</button>
                    <button id="import-btn">Import from Excel</button>
                    <input type="file" id="file-input" accept=".xlsx,.xls,.csv" style="display:none;">
                    <button id="logout-btn">Logout</button>
                </div>
            </header>
            
            <div class="tabs">
                <button class="tab-btn active" data-tab="journal">Journal</button>
                <button class="tab-btn" data-tab="statistics">Statistics</button>
                <button class="tab-btn" data-tab="calendar">P/L Calendar</button>
                <button class="tab-btn" data-tab="news">Economic News</button>
            </div>
            
            <!-- Journal Tab -->
            <div id="journal" class="tab-content active">
                <form id="trade-form">
                    <input type="hidden" id="edit-index" value="-1">
                    <div class="form-group">
                        <label for="trade-date">Date:</label>
                        <input type="date" id="trade-date" required>
                    </div>
                    <div class="form-group">
                        <label for="currency-pair">Currency Pair:</label>
                        <input type="text" id="currency-pair" placeholder="e.g. EUR/USD" required>
                    </div>
                    <div class="form-group">
                        <label for="entry-price">Entry Price:</label>
                        <input type="number" step="0.00001" id="entry-price" required>
                    </div>
                    <div class="form-group">
                        <label for="exit-price">Exit Price:</label>
                        <input type="number" step="0.00001" id="exit-price" required>
                    </div>
                    <div class="form-group">
                        <label for="position-size">Position Size:</label>
                        <input type="number" step="0.01" id="position-size" required>
                    </div>
                    <div class="form-group">
                        <label for="trade-outcome">Outcome:</label>
                        <select id="trade-outcome" required>
                            <option value="win">Win</option>
                            <option value="loss">Loss</option>
                            <option value="break-even">Break Even</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="news-impact">Economic News Impact:</label>
                        <select id="news-impact">
                            <option value="none">No Significant News</option>
                            <option value="low">Low Impact News</option>
                            <option value="medium">Medium Impact News</option>
                            <option value="high">High Impact News</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="notes">Notes:</label>
                        <textarea id="notes" rows="3"></textarea>
                    </div>
                    <button type="submit" id="submit-btn">Add Trade</button>
                    <button type="button" id="cancel-edit" style="display:none;">Cancel</button>
                </form>
                
                <div id="trade-list">
                    <h2>Recent Trades</h2>
                    <table>
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Pair</th>
                                <th>Entry</th>
                                <th>Exit</th>
                                <th>P/L</th>
                                <th>Outcome</th>
                                <th>News</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="trade-entries">
                            <!-- Entries will be added here -->
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Statistics Tab -->
            <div id="statistics" class="tab-content">
                <h2>Trading Statistics</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>Win Rate</h3>
                        <div id="win-rate" class="stat-value">0%</div>
                    </div>
                    <div class="stat-card">
                        <h3>Average Win</h3>
                        <div id="avg-win" class="stat-value">0</div>
                    </div>
                    <div class="stat-card">
                        <h3>Average Loss</h3>
                        <div id="avg-loss" class="stat-value">0</div>
                    </div>
                    <div class="stat-card">
                        <h3>Profit Factor</h3>
                        <div id="profit-factor" class="stat-value">0</div>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="performance-chart"></canvas>
                </div>
                <div class="chart-container">
                    <canvas id="outcome-chart"></canvas>
                </div>
                <div class="chart-container">
                    <canvas id="news-impact-chart"></canvas>
                </div>
            </div>
            
            <!-- P/L Calendar Tab -->
            <div id="calendar" class="tab-content">
                <h2>Profit/Loss Calendar</h2>
                <div class="calendar-controls">
                    <button id="prev-month">Previous</button>
                    <h3 id="current-month">Month Year</h3>
                    <button id="next-month">Next</button>
                </div>
                <div id="pl-calendar" class="calendar-grid">
                    <!-- Calendar will be generated here -->
                </div>
                <div class="pl-legend">
                    <div class="legend-item"><span class="color-sample profit"></span> Profit</div>
                    <div class="legend-item"><span class="color-sample loss"></span> Loss</div>
                    <div class="legend-item"><span class="color-sample neutral"></span> Break Even</div>
                </div>
            </div>
            
            <!-- Economic News Tab -->
            <div id="news" class="tab-content">
                <h2>Economic News Impact Analysis</h2>
                <div class="news-stats">
                    <div class="stat-card">
                        <h3>Trades with News</h3>
                        <div id="trades-with-news" class="stat-value">0</div>
                    </div>
                    <div class="stat-card">
                        <h3>Win Rate with News</h3>
                        <div id="win-rate-news" class="stat-value">0%</div>
                    </div>
                    <div class="stat-card">
                        <h3>Win Rate without News</h3>
                        <div id="win-rate-no-news" class="stat-value">0%</div>
                    </div>
                </div>
                <table id="news-impact-table">
                    <thead>
                        <tr>
                            <th>News Impact</th>
                            <th>Number of Trades</th>
                            <th>Win Rate</th>
                            <th>Average P/L</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>No News</td>
                            <td id="no-news-count">0</td>
                            <td id="no-news-win-rate">0%</td>
                            <td id="no-news-avg">0</td>
                        </tr>
                        <tr>
                            <td>Low Impact</td>
                            <td id="low-news-count">0</td>
                            <td id="low-news-win-rate">0%</td>
                            <td id="low-news-avg">0</td>
                        </tr>
                        <tr>
                            <td>Medium Impact</td>
                            <td id="medium-news-count">0</td>
                            <td id="medium-news-win-rate">0%</td>
                            <td id="medium-news-avg">0</td>
                        </tr>
                        <tr>
                            <td>High Impact</td>
                            <td id="high-news-count">0</td>
                            <td id="high-news-win-rate">0%</td>
                            <td id="high-news-avg">0</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Load libraries -->
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/file-saver@2.0.5/dist/FileSaver.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="script.js"></script>
</body>
</html>
